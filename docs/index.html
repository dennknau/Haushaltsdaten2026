<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Interaktiver Haushaltsplan der Gemeinde Jesberg</title>

  <link href="https://unpkg.com/tabulator-tables@6.3.1/dist/css/tabulator.min.css" rel="stylesheet">
  <script src="https://unpkg.com/tabulator-tables@6.3.1/dist/js/tabulator.min.js"></script>
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>

  <style>
    body {
      font-family: "Calibri Light", Calibri, "Segoe UI", Arial, sans-serif;
      margin: 20px;
      background-color: #078930;
      color: #111;
    }

    h1 { font-size: 1.6rem; color:#fff; }
    h2 { font-size: 1.2rem; margin-bottom:12px; }

    .card {
      background:#fff;
      border-radius:12px;
      padding:16px;
      margin-top:16px;
      box-shadow:0 2px 8px rgba(0,0,0,.08);
    }

    header {
      display:grid;
      grid-template-columns: repeat(auto-fit,minmax(240px,1fr));
      gap:16px;
      align-items:end;
    }

    label { font-weight:600; }
    select { width:100%; min-height:140px; }
    select.single { min-height:auto; }

    button {
      padding:8px 14px;
      border-radius:10px;
      border:1px solid #ddd;
      background:#fff;
      cursor:pointer;
    }

    .hint { color:#555; font-size:.9rem; }

    .pieGrid {
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:16px;
    }
    @media(max-width:900px){ .pieGrid{grid-template-columns:1fr;} }

    .pieBox{height:420px;}
  </style>
</head>

<body>
<h1>Interaktiver Haushaltsplan der Gemeinde Jesberg</h1>

<header class="card">
  <div>
    <label for="jahrSelect">Jahr</label>
    <select id="jahrSelect" class="single"></select>
  </div>

  <div>
    <label for="gruppe1Select">Gruppe 1</label>
    <select id="gruppe1Select" class="single"></select>
  </div>

  <div>
    <label for="gruppeSelect">Kostenstellen</label>
    <select id="gruppeSelect" multiple></select>
    <div class="hint">Mehrfachauswahl möglich · leer = alle</div>
  </div>

  <div>
    <button id="btnAll">Alle Kostenstellen</button>
    <div class="hint" id="status"></div>
  </div>
</header>

<!-- Gesamtübersicht -->
<div class="card">
  <h2>Gesamtübersicht</h2>
  <table class="summary">
    <tr><td>Erträge gesamt</td><td id="sumErtrag"></td></tr>
    <tr><td>Aufwendungen gesamt</td><td id="sumAufwand"></td></tr>
    <tr><td><b>Ergebnis</b></td><td id="sumErgebnis"></td></tr>
  </table>
</div>

<!-- Kreisdiagramme -->
<div class="card">
  <h2>Kreisdiagramme nach Kontogruppe</h2>
  <div class="pieGrid">
    <div>
      <div class="hint">Erträge</div>
      <div id="pieErtraege" class="pieBox"></div>
    </div>
    <div>
      <div class="hint">Aufwendungen</div>
      <div id="pieAufwendungen" class="pieBox"></div>
    </div>
  </div>
</div>

<!-- Tabelle -->
<div class="card">
  <h2>Ergebnisübersicht</h2>
  <div id="table"></div>
</div>

<script src="./app.js"></script>
</body>
</html>
